"use strict";(self.webpackChunktetu_game_ui=self.webpackChunktetu_game_ui||[]).push([[221],{2221:(L,T,n)=>{n.r(T),n.d(T,{RepairModule:()=>nt});var f=n(35103),y=n(5476),o=n(16268),O=n(28230),b=n(82865),l=n(76291),M=n(68305),v=n(56561),m=n(98992),x=n(68351),r=n(5534),g=n(74107),k=n(57563),u=n(35879),E=n(90410),A=n(90654),S=n(28589),t=n(98678),R=n(30611),s=n(59634),p=n(11517),_=n(90473),d=n(4991),C=n(53344),P=n(51216),I=n(39283),U=n(43605),w=n(2097),B=n(51650),F=n(48821),N=n(86237),j=n(38598),H=n(46835),K=n(13252),Y=n(96342);function G(a,h){1&a&&t._UZ(0,"app-loading-small",2)}function $(a,h){if(1&a&&(t.TgZ(0,"button",27)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"img",28),t.qZA()),2&a){const e=t.oxw(3);t.Q6J("disabled",!0),t.xp6(2),t.hij(" ",t.lcZ(3,3,"repair.buttons.not-enough")," "),t.xp6(2),t.Q6J("src","assets/images/ui/icons/tokens/"+e.targetItem.meta.feeToken.token.symbol.toLowerCase()+".png",t.LSH)}}function J(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.approveFeeToken())}),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"img",28),t.qZA()}if(2&a){const e=t.oxw(3);t.Q6J("disabled",e.transactionLoading),t.xp6(2),t.hij(" ",t.lcZ(3,3,"repair.buttons.approve")," "),t.xp6(2),t.Q6J("src","assets/images/ui/icons/tokens/"+e.targetItem.meta.feeToken.token.symbol.toLowerCase()+".png",t.LSH)}}function W(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("hostClick",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.repair())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const e=t.oxw(3);t.Q6J("isNeedConfirm",!0)("isDisabled",e.transactionLoading),t.xp6(1),t.hij(" ",t.lcZ(2,3,"repair.buttons.repair-this-item")," ")}}function Q(a,h){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17)(2,"div",18),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t._uU(6),t.qZA()(),t.TgZ(7,"div",19),t.YNc(8,$,5,5,"button",20),t.YNc(9,J,5,5,"button",21),t.YNc(10,W,3,5,"button",22),t.TgZ(11,"button",23),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.buyTokens())}),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",24)(15,"span"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"app-balance",25),t.qZA(),t.TgZ(19,"div",26),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,14,"repair.target-durability")," "),t.xp6(3),t.AsE("",e.targetItem.durability," / ",e.targetItem.meta.durability,""),t.xp6(2),t.Q6J("ngIf",!e.isEnoughAllowance&&!e.isEnoughBalance),t.xp6(1),t.Q6J("ngIf",!e.isEnoughAllowance&&e.isEnoughBalance),t.xp6(1),t.Q6J("ngIf",e.isEnoughAllowance&&e.isEnoughBalance),t.xp6(1),t.Q6J("disabled",e.transactionLoading),t.xp6(1),t.hij(" ",t.lcZ(13,16,"repair.buttons.buy-coins")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"repair.cost")," "),t.xp6(2),t.Q6J("isReverse",!1)("token",e.targetItem.meta.feeToken.token.id)("balance",+e.targetItem.meta.feeToken.amount)("isShowBalanceUsd",!0),t.xp6(2),t.hij(" ",t.lcZ(21,20,"repair.desc")," ")}}function X(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"app-item-slot",34),t.NdJ("clickEmit",function(){const Z=t.CHM(e).$implicit,D=t.oxw(3);return t.KtG(D.selectCatalyst(Z))}),t.qZA()}2&a&&t.Q6J("slotItem",h.$implicit)}function V(a,h){if(1&a&&(t.TgZ(0,"div",31)(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div")(5,"span",13),t._uU(6),t.qZA(),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"div",32),t.YNc(10,X,1,1,"app-item-slot",33),t.qZA()),2&a){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,4,"repair.catalysts")," "),t.xp6(4),t.Oqu(e.catalystItems.length),t.xp6(1),t.hij(" ",t.lcZ(8,6,"repair.available")," "),t.xp6(3),t.Q6J("ngForOf",e.catalystItems)}}function q(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"app-title",5),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.resetCatalyst())}),t._uU(6),t.ALo(7,"translate"),t.qZA()(),t._UZ(8,"app-scratch",7),t.TgZ(9,"div",8)(10,"div",9)(11,"div"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"app-item-slot",10),t.NdJ("clickEmit",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onItemSlotClick(c.targetItem))}),t.qZA()(),t._UZ(15,"div",11),t.TgZ(16,"div",12)(17,"div",13),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"app-item-slot",10),t.NdJ("clickEmit",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onItemSlotClick(c.selectedCatalyst))}),t.qZA()()(),t._UZ(21,"app-scratch",7),t.TgZ(22,"div",9),t.YNc(23,Q,22,22,"ng-container",14),t.YNc(24,V,11,8,"ng-template",null,15,t.W1O),t.qZA(),t._UZ(26,"app-scratch",7),t.TgZ(27,"div",16),t._uU(28),t.ALo(29,"translate"),t.qZA()()}if(2&a){const e=t.MAs(25),i=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,9,"repair.title")," "),t.xp6(3),t.hij(" ",t.lcZ(7,11,"repair.buttons.reset")," "),t.xp6(6),t.hij(" ",t.lcZ(13,13,"repair.target")," "),t.xp6(2),t.Q6J("slotItem",i.targetItem),t.xp6(4),t.hij(" ",t.lcZ(19,15,"repair.catalyst")," "),t.xp6(2),t.Q6J("slotItem",i.selectedCatalyst),t.xp6(3),t.Q6J("ngIf",i.selectedCatalyst&&i.selectedCatalyst.itemId>0)("ngIfElse",e),t.xp6(5),t.hij(" ",t.lcZ(29,17,"repair.desc2")," ")}}const z={itemId:0,equippedSlot:r.Z$.NO_SLOT},et=[{path:l.EX.EMPTY,component:(()=>{class a{constructor(e,i,c,Z,D,at,ot,it,st,pt,rt,gt,ct,lt){this.destroy$=e,this.activatedRoute=i,this.logger=c,this.appStateService=Z,this.providerService=D,this.heroControllerService=at,this.itemControllerService=ot,this.tokenService=it,this.subgraphService=st,this.changeDetectorRef=pt,this.dialog=rt,this.router=gt,this.soundService=ct,this.mediator=lt,this.loading=!0,this.MAIN_ROUTES=l.EX,this.catalystItems=[],this.selectedCatalyst=z,this.accountBalance=0n,this.accountBalanceFormatted="0",this.isEnoughAllowance=!1,this.isEnoughBalance=!1,this.transactionLoading=!1,this.heroAdr=this.activatedRoute.snapshot.paramMap.get(l.xu)??"",this.heroId=Number(this.activatedRoute.snapshot.paramMap.get(l.B$)??0),this.itemAdr=this.activatedRoute.snapshot.paramMap.get(l.i3)??"",this.itemId=Number(this.activatedRoute.snapshot.paramMap.get(l.q6)??0),this.appStateService.setHeaderState({isAccountBalanceShown:!0,isInventoryShown:!0,backUrl:[l.EX.MAIN,l.EX.INVENTORY,this.heroAdr,this.heroId.toString()]})}ngOnInit(){this.providerService.subscribeOnAccountAndNetwork(this.destroy$,this.changeDetectorRef,e=>{this.account=e,this.init()},e=>{this.chainId=e,this.heroControllerService.adjustFees(e),this.itemControllerService.adjustFees(e),this.tokenService.adjustFees(e),this.init()})}init(){this.account&&this.chainId&&(this.loadHeroInfo(),this.loadItems())}loadHeroInfo(){this.subgraphService.hero$(this.heroAdr,this.heroId).pipe((0,u.R)(this.destroy$)).subscribe(e=>{e&&(this.hero=e,this.changeDetectorRef.detectChanges())})}loadItems(){this.subgraphService.usersItems$(this.account).pipe((0,E.x)(()=>{this.changeDetectorRef.detectChanges()}),(0,u.R)(this.destroy$)).subscribe(e=>{this.targetItem=e.filter(i=>i.itemId===this.itemId&&i.meta.id.toLowerCase()===this.itemAdr.toLowerCase())[0],this.catalystItems=e.filter(i=>i.itemId!==this.itemId&&i.meta.id.toLowerCase()===this.itemAdr.toLowerCase()).map(i=>i),this.updateFeeBalance(),this.loading=!1})}updateFeeBalance(){(0,A.D)([this.tokenService.allowance$(this.targetItem.meta.feeToken.token.id,this.account,(0,x.wA)(this.chainId).itemController),this.tokenService.balanceOf$(this.targetItem.meta.feeToken.token.id,this.account)]).pipe((0,u.R)(this.destroy$)).subscribe(([e,i])=>{this.isEnoughAllowance=e>=(0,k.vz)(this.targetItem.meta.feeToken.amount,this.targetItem.meta.feeToken.token.decimals),this.isEnoughBalance=i>=(0,k.vz)(this.targetItem.meta.feeToken.amount,this.targetItem.meta.feeToken.token.decimals),this.accountBalance=i,this.accountBalanceFormatted=S.M.formatCurrency(+(0,k.bM)(i,this.targetItem.meta.feeToken.token.decimals)),this.changeDetectorRef.detectChanges(),this.mediator.dispatch(new v.N.PageLoaded(l.EX.REPAIR))})}selectCatalyst(e){this.selectedCatalyst=e}resetCatalyst(){this.selectedCatalyst=z}onItemSlotClick(e){e&&0!==e.itemId&&(this.dialogRef=this.dialog.open(m.G,{panelClass:"app-overlay-pane-full-width",data:{item:e,hero:this.hero,isShowButtons:!1,chainId:this.chainId}}))}repair(){this.transactionLoading=!0,this.changeDetectorRef.detectChanges(),this.soundService.play({key:"repair"}),this.itemControllerService.repairDurability$(this.account,this.chainId,this.targetItem.meta.id,this.targetItem.itemId,this.selectedCatalyst?.itemId??0).pipe((0,E.x)(()=>{this.soundService.play({key:"repair"}),this.transactionLoading=!1,this.changeDetectorRef.detectChanges()}),(0,u.R)(this.destroy$)).subscribe(()=>{this.selectedCatalyst=z,this.init(),this.router.navigate([l.EX.MAIN,l.EX.INVENTORY,this.heroAdr,this.heroId.toString()])})}approveFeeToken(){this.transactionLoading=!0,this.changeDetectorRef.detectChanges(),this.tokenService.approve$(this.account,this.targetItem.meta.feeToken.token.id,(0,x.wA)(this.chainId).itemController,BigInt(g.k.MAX_UINT)).pipe((0,E.x)(()=>{this.transactionLoading=!1,this.changeDetectorRef.detectChanges()}),(0,u.R)(this.destroy$)).subscribe(()=>{this.updateFeeBalance()})}buyTokens(){this.transactionLoading=!0,this.changeDetectorRef.detectChanges(),this.soundService.play({key:"buy_coins"});const e=this.targetItem.meta.feeToken;this.tokenService.buyTokens$(this.account,"",e.token.id,(0,k.vz)(e.amount,e.token.decimals),this.chainId).pipe((0,E.x)(()=>{this.transactionLoading=!1,this.changeDetectorRef.detectChanges()}),(0,u.R)(this.destroy$)).subscribe(()=>{this.updateFeeBalance()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(M.z),t.Y36(o.gz),t.Y36(R.Kf),t.Y36(s.Z),t.Y36(p.H),t.Y36(_.r),t.Y36(d.Q),t.Y36(C.B),t.Y36(P.k),t.Y36(t.sBO),t.Y36(I.Vq),t.Y36(o.F0),t.Y36(U.y),t.Y36(w._))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-repair"]],hostAttrs:[1,"app-bg-inventory-all-back","g-flex-column","g-flex-column__item"],features:[t._Bn([M.z])],decls:3,vars:2,consts:[["class","page-loader",4,"ngIf","ngIfElse"],["contentTpl",""],[1,"page-loader"],[1,"container","g-flex-column__item","g-scroll-y"],[1,"g-flex","g-flex--align-center","g-flex--space-between"],["fontType","large","backgroundType","small",1,"title","g-flex--align-center"],[1,"app-btn-blue-2","g-flex","g-flex--align-center","g-flex--justify-center",3,"click"],["backgroundType","huge",1,"scratch"],[1,"items","g-flex","g-flex--align-center","g-flex--justify-center"],[1,"g-flex-column"],["slotSize","huge",1,"item-slot","g-flex",3,"slotItem","clickEmit"],[1,"item-divider","app-divider-group-of-bolts"],[1,"catalisator","g-flex-column"],[1,"app-text-warning","app-text-warning--shadow"],[4,"ngIf","ngIfElse"],["itemsTpl",""],[1,"desc2","app-btn-small_font-size","color-caption"],[1,"title","g-flex","g-flex--justify-center"],[1,"title__name"],[1,"buttons","g-flex","g-flex--align-center","g-flex--justify-center"],["class","btn-repair app-btn-red-3 g-flex g-flex--align-center g-flex--justify-center",3,"disabled",4,"ngIf"],["class","btn-repair app-btn-red-3 g-flex g-flex--align-center g-flex--justify-center",3,"disabled","click",4,"ngIf"],["appButtonClick","","class","btn-repair app-btn-red-3",3,"isNeedConfirm","isDisabled","hostClick",4,"ngIf"],[1,"btn-buy","app-btn-silver-2",3,"disabled","click"],[1,"cost","g-flex","g-flex--align-center","g-flex--justify-center"],[1,"cost__value",3,"isReverse","token","balance","isShowBalanceUsd"],[1,"desc","g-flex","g-flex--align-center","g-flex--justify-center","app-btn-small_font-size","color-red-fire"],[1,"btn-repair","app-btn-red-3","g-flex","g-flex--align-center","g-flex--justify-center",3,"disabled"],["alt","",1,"balance__icon","shadow__icon",3,"src"],[1,"btn-repair","app-btn-red-3","g-flex","g-flex--align-center","g-flex--justify-center",3,"disabled","click"],["appButtonClick","",1,"btn-repair","app-btn-red-3",3,"isNeedConfirm","isDisabled","hostClick"],[1,"title","g-flex","g-flex--space-between"],[1,"g-flex","g-flex--wrap"],["class","catalisator-slot g-flex","slotSize","huge",3,"slotItem","clickEmit",4,"ngFor","ngForOf"],["slotSize","huge",1,"catalisator-slot","g-flex",3,"slotItem","clickEmit"]],template:function(e,i){if(1&e&&(t.YNc(0,G,1,0,"app-loading-small",0),t.YNc(1,q,30,19,"ng-template",null,1,t.W1O)),2&e){const c=t.MAs(2);t.Q6J("ngIf",i.loading)("ngIfElse",c)}},dependencies:[f.sg,f.O5,B.r,F.T,N.B,j.y,H.T,K.Y,Y.X$],styles:[".pointer[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:url(/assets/images/cursor/cursor-50-active.avif) 10 0,pointer}.no-action[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}.hidden[_ngcontent-%COMP%]{display:none!important}.width-100[_ngcontent-%COMP%]{width:100%}@keyframes button-process-animation{0%{text-shadow:none}to{text-shadow:0 0 16px #dfa94e}}.button-process-animation[_ngcontent-%COMP%]{animation-duration:1s;animation-name:button-process-animation;animation-iteration-count:infinite;animation-direction:alternate}.page-loader[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}.gap-2[_ngcontent-%COMP%]{gap:2px}.gap-4[_ngcontent-%COMP%]{gap:4px}.gap-6[_ngcontent-%COMP%]{gap:6px}.gap-8[_ngcontent-%COMP%]{gap:8px}.gap-10[_ngcontent-%COMP%]{gap:10px}.gap-12[_ngcontent-%COMP%]{gap:12px}.gap-14[_ngcontent-%COMP%]{gap:14px}.gap-16[_ngcontent-%COMP%]{gap:16px}.gap-18[_ngcontent-%COMP%]{gap:18px}.gap-20[_ngcontent-%COMP%]{gap:20px}.gap-22[_ngcontent-%COMP%]{gap:22px}.gap-24[_ngcontent-%COMP%]{gap:24px}.gap-26[_ngcontent-%COMP%]{gap:26px}.gap-28[_ngcontent-%COMP%]{gap:28px}.gap-30[_ngcontent-%COMP%]{gap:30px}.gap-32[_ngcontent-%COMP%]{gap:32px}.gap-34[_ngcontent-%COMP%]{gap:34px}.gap-36[_ngcontent-%COMP%]{gap:36px}.gap-38[_ngcontent-%COMP%]{gap:38px}.gap-40[_ngcontent-%COMP%]{gap:40px}.gap-42[_ngcontent-%COMP%]{gap:42px}.gap-44[_ngcontent-%COMP%]{gap:44px}.gap-46[_ngcontent-%COMP%]{gap:46px}.gap-48[_ngcontent-%COMP%]{gap:48px}.gap-50[_ngcontent-%COMP%]{gap:50px}.gap-52[_ngcontent-%COMP%]{gap:52px}.gap-54[_ngcontent-%COMP%]{gap:54px}.gap-56[_ngcontent-%COMP%]{gap:56px}.gap-58[_ngcontent-%COMP%]{gap:58px}.gap-60[_ngcontent-%COMP%]{gap:60px}.gap-62[_ngcontent-%COMP%]{gap:62px}.gap-64[_ngcontent-%COMP%]{gap:64px}.gap-66[_ngcontent-%COMP%]{gap:66px}.gap-68[_ngcontent-%COMP%]{gap:68px}.gap-70[_ngcontent-%COMP%]{gap:70px}.gap-72[_ngcontent-%COMP%]{gap:72px}.gap-74[_ngcontent-%COMP%]{gap:74px}.gap-76[_ngcontent-%COMP%]{gap:76px}.gap-78[_ngcontent-%COMP%]{gap:78px}.gap-80[_ngcontent-%COMP%]{gap:80px}.gap-82[_ngcontent-%COMP%]{gap:82px}.gap-84[_ngcontent-%COMP%]{gap:84px}.gap-86[_ngcontent-%COMP%]{gap:86px}.gap-88[_ngcontent-%COMP%]{gap:88px}.gap-90[_ngcontent-%COMP%]{gap:90px}.gap-92[_ngcontent-%COMP%]{gap:92px}.gap-94[_ngcontent-%COMP%]{gap:94px}.gap-96[_ngcontent-%COMP%]{gap:96px}.gap-98[_ngcontent-%COMP%]{gap:98px}.gap-100[_ngcontent-%COMP%]{gap:100px}.color-enemy-name[_ngcontent-%COMP%]{color:#e03636}.color-negative-value[_ngcontent-%COMP%]{color:#dd6363}.color-positive-value[_ngcontent-%COMP%]{color:#a6a6a6}.color-mana[_ngcontent-%COMP%]{color:#8282f6}.color-red-fire[_ngcontent-%COMP%]{color:#dc3e3e}.color-yellow-fire[_ngcontent-%COMP%]{color:#dfa94e}.color-nickname[_ngcontent-%COMP%]{color:#d7a061}.color-caption[_ngcontent-%COMP%]{color:#a37c83}.bar-hp[_ngcontent-%COMP%]{color:#9af481}.bar-mp[_ngcontent-%COMP%]{color:#8282f6}.bar-exp[_ngcontent-%COMP%]{color:#ffda82}.bar-enemy[_ngcontent-%COMP%]{color:#fb9696}.color-try[_ngcontent-%COMP%]{color:#d8ffd4}.color-free[_ngcontent-%COMP%]{color:#f9fff5}[_nghost-%COMP%]{width:1080px}.container[_ngcontent-%COMP%]{padding:40px 80px}.app-btn-blue-2[_ngcontent-%COMP%]{margin:0}.scratch[_ngcontent-%COMP%]{margin:20px 0 0}.items[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:40px}.item-slot[_ngcontent-%COMP%]{margin-top:10px}.catalisator-slot[_ngcontent-%COMP%]{margin:10px 20px}.item-divider[_ngcontent-%COMP%]{margin:52px 50px 0}.title[_ngcontent-%COMP%]{margin:10px 30px}.title__name[_ngcontent-%COMP%]{margin-right:40px}.catalisator[_ngcontent-%COMP%]{position:relative}.btn-cross[_ngcontent-%COMP%]{position:absolute;right:11px;bottom:9px}.cost[_ngcontent-%COMP%]{margin-top:20px}.cost__value[_ngcontent-%COMP%]{margin-left:10px}.btn-buy[_ngcontent-%COMP%]{position:absolute;right:-20px}.buttons[_ngcontent-%COMP%]{position:relative}.desc[_ngcontent-%COMP%]{margin-top:1px;color:#cd5c5c}.desc2[_ngcontent-%COMP%]{margin-top:20px;text-align:center}"],changeDetection:0}),a})(),data:{animation:"RepairComponent"}}];let nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[f.ez,o.Bz.forChild(et),y.u5,b.m,O.r]}),a})()},90473:(L,T,n)=>{n.d(T,{r:()=>S});var f=n(80557),y=n(25658),o=n(68351),O=n(43916),b=n(14111),l=n(2677),M=n(9249),v=n(21160),m=n(69637),x=n(27193),r=n(17978),g=n(98678),k=n(11517),u=n(55298),E=n(30611),A=n(46693);let S=(()=>{class t extends y.kP{constructor(s,p,_,d){super(),this.providerService=s,this.errorService=p,this.logger=_,this.relayService=d}createHeroController(s,p=""){return r.x8.connect((0,o.wA)(s).heroController,this.providerService.getProviderForRead())}nameToHero$(s,p){return this.logger.trace("nameToHero",s,p),(0,b.D)(this.createHeroController(p).nameToHero(s)).pipe((0,l.X)({count:y.S8,delay:y.V1}),(0,M.K)(this.errorService.onCatchError))}askReinforcement$(s,p,_,d){return(0,b.D)(this.createHeroController(p,s).askReinforcement.estimateGas(_,d)).pipe((0,v.w)(C=>this.updateCurrentFees$(this.providerService,C)),(0,m.z)(C=>this.providerService.onChainCall(new f.bq({name:"Ask reinforcement",showLoadingScreen:!0,isNeedUpdateHero:!0,txPopulated:this.createHeroController(p,s).askReinforcement.populateTransaction(_,d),gasLimit:(0,O.gu)(C),maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas,gasPrice:this.gasPrice,isDelegatedRelayPossible:!0,relayService:this.relayService}))),(0,M.K)(this.errorService.onCatchError))}levelUp$(s,p,_,d,C){return(0,b.D)(this.createHeroController(p,s).levelUp.estimateGas(_,d,C)).pipe((0,v.w)(P=>this.updateCurrentFees$(this.providerService,P)),(0,x.b)(P=>this.providerService.onChainCall(new f.bq({name:"Level up",isNeedUpdateHero:!0,isNeedUpdateBalances:!0,txPopulated:this.createHeroController(p,s).levelUp.populateTransaction(_,d,C),gasLimit:(0,O.gu)(P),maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas,gasPrice:this.gasPrice,isDelegatedRelayPossible:!0,relayService:this.relayService}))),(0,M.K)(this.errorService.onCatchError))}create$(s,p,_,d,C,P=!0){return(0,b.D)(this.createHeroController(p,s).createWithRefCode.estimateGas(_,d,C.toLowerCase(),P)).pipe((0,v.w)(I=>this.updateCurrentFees$(this.providerService,I)),(0,x.b)(I=>this.providerService.onChainCall(new f.bq({name:"Create hero",isNeedUpdateHero:!0,isNeedUpdateBalances:!0,txPopulated:this.createHeroController(p,s).createWithRefCode.populateTransaction(_,d,C,P),gasLimit:(0,O.gu)(I),maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas,gasPrice:this.gasPrice,isDelegatedRelayPossible:!0,relayService:this.relayService}))),(0,M.K)(this.errorService.onCatchError))}setBiome$(s,p,_,d,C){return(0,b.D)(this.createHeroController(p,s).setBiome.estimateGas(_,d,C)).pipe((0,v.w)(P=>this.updateCurrentFees$(this.providerService,P)),(0,x.b)(P=>this.providerService.onChainCall(new f.bq({name:"Set biome",txPopulated:this.createHeroController(p,s).setBiome.populateTransaction(_,d,C),gasLimit:(0,O.gu)(P),maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas,gasPrice:this.gasPrice,isDelegatedRelayPossible:!0,relayService:this.relayService}))),(0,M.K)(this.errorService.onCatchError))}}return t.\u0275fac=function(s){return new(s||t)(g.LFG(k.H),g.LFG(u.T),g.LFG(E.Kf),g.LFG(A.D))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},51650:(L,T,n)=>{n.d(T,{r:()=>v});var f=n(31772),y=n(43916),o=n(98678),O=n(35103);function b(m,x){if(1&m&&o._UZ(0,"img",4),2&m){const r=o.oxw();o.ekj("icon--no-margin",r.isNoMargin)}}function l(m,x){if(1&m&&(o.TgZ(0,"div",5),o._uU(1),o.qZA()),2&m){const r=o.oxw();o.xp6(1),o.hij(" ",r.description," ")}}const M=["*"];let v=(()=>{class m{constructor(){this.fontType="default",this.isIncompressible=!1,this.isShowDivider=!0,this.description=null,this.isNoMargin=!1}get isMetamask(){return y.aT||(0,f.tq)()}ngOnChanges({backgroundType:r,isIncompressible:g}){const k=r?.currentValue,u=this.getHostClass(k);this.hostClasses=g?.currentValue?[u,u+"_incompressible"]:[u]}getHostClass(r){switch(r){case"middle":return"app-paint-titles-1-middle";case"small":return"app-paint-titles-1-small";case"medium2":return"app-paint-titles-2-medium";default:return"app-paint-titles-1-long"}}}return m.\u0275fac=function(r){return new(r||m)},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-title"]],hostVars:4,hostBindings:function(r,g){2&r&&(o.Tol(g.hostClasses),o.ekj("is-metamask",g.isMetamask))},inputs:{backgroundType:"backgroundType",fontType:"fontType",isIncompressible:"isIncompressible",isShowDivider:"isShowDivider",description:"description",isNoMargin:"isNoMargin"},features:[o.TTD],ngContentSelectors:M,decls:5,vars:7,consts:[[1,"text",3,"ngClass"],[1,"g-flex-column","g-flex--align-center"],["class","icon","src","assets/images/ui/dividers/borders_v/border_v_red_down.png","alt","",3,"icon--no-margin",4,"ngIf"],["class","desc g-flex g-flex--align-center",4,"ngIf"],["src","assets/images/ui/dividers/borders_v/border_v_red_down.png","alt","",1,"icon"],[1,"desc","g-flex","g-flex--align-center"]],template:function(r,g){1&r&&(o.F$t(),o.TgZ(0,"div",0)(1,"div",1),o.Hsn(2),o.YNc(3,b,1,2,"img",2),o.qZA(),o.YNc(4,l,2,1,"div",3),o.qZA()),2&r&&(o.ekj("has-description",!!g.description)("text--long","long"===g.backgroundType),o.Q6J("ngClass",g.fontType),o.xp6(3),o.Q6J("ngIf",g.isShowDivider),o.xp6(1),o.Q6J("ngIf",g.description))},dependencies:[O.mk,O.O5],styles:[".pointer[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:url(/assets/images/cursor/cursor-50-active.avif) 10 0,pointer}.no-action[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}.hidden[_ngcontent-%COMP%]{display:none!important}.width-100[_ngcontent-%COMP%]{width:100%}@keyframes button-process-animation{0%{text-shadow:none}to{text-shadow:0 0 16px #dfa94e}}.button-process-animation[_ngcontent-%COMP%]{animation-duration:1s;animation-name:button-process-animation;animation-iteration-count:infinite;animation-direction:alternate}.page-loader[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}.gap-2[_ngcontent-%COMP%]{gap:2px}.gap-4[_ngcontent-%COMP%]{gap:4px}.gap-6[_ngcontent-%COMP%]{gap:6px}.gap-8[_ngcontent-%COMP%]{gap:8px}.gap-10[_ngcontent-%COMP%]{gap:10px}.gap-12[_ngcontent-%COMP%]{gap:12px}.gap-14[_ngcontent-%COMP%]{gap:14px}.gap-16[_ngcontent-%COMP%]{gap:16px}.gap-18[_ngcontent-%COMP%]{gap:18px}.gap-20[_ngcontent-%COMP%]{gap:20px}.gap-22[_ngcontent-%COMP%]{gap:22px}.gap-24[_ngcontent-%COMP%]{gap:24px}.gap-26[_ngcontent-%COMP%]{gap:26px}.gap-28[_ngcontent-%COMP%]{gap:28px}.gap-30[_ngcontent-%COMP%]{gap:30px}.gap-32[_ngcontent-%COMP%]{gap:32px}.gap-34[_ngcontent-%COMP%]{gap:34px}.gap-36[_ngcontent-%COMP%]{gap:36px}.gap-38[_ngcontent-%COMP%]{gap:38px}.gap-40[_ngcontent-%COMP%]{gap:40px}.gap-42[_ngcontent-%COMP%]{gap:42px}.gap-44[_ngcontent-%COMP%]{gap:44px}.gap-46[_ngcontent-%COMP%]{gap:46px}.gap-48[_ngcontent-%COMP%]{gap:48px}.gap-50[_ngcontent-%COMP%]{gap:50px}.gap-52[_ngcontent-%COMP%]{gap:52px}.gap-54[_ngcontent-%COMP%]{gap:54px}.gap-56[_ngcontent-%COMP%]{gap:56px}.gap-58[_ngcontent-%COMP%]{gap:58px}.gap-60[_ngcontent-%COMP%]{gap:60px}.gap-62[_ngcontent-%COMP%]{gap:62px}.gap-64[_ngcontent-%COMP%]{gap:64px}.gap-66[_ngcontent-%COMP%]{gap:66px}.gap-68[_ngcontent-%COMP%]{gap:68px}.gap-70[_ngcontent-%COMP%]{gap:70px}.gap-72[_ngcontent-%COMP%]{gap:72px}.gap-74[_ngcontent-%COMP%]{gap:74px}.gap-76[_ngcontent-%COMP%]{gap:76px}.gap-78[_ngcontent-%COMP%]{gap:78px}.gap-80[_ngcontent-%COMP%]{gap:80px}.gap-82[_ngcontent-%COMP%]{gap:82px}.gap-84[_ngcontent-%COMP%]{gap:84px}.gap-86[_ngcontent-%COMP%]{gap:86px}.gap-88[_ngcontent-%COMP%]{gap:88px}.gap-90[_ngcontent-%COMP%]{gap:90px}.gap-92[_ngcontent-%COMP%]{gap:92px}.gap-94[_ngcontent-%COMP%]{gap:94px}.gap-96[_ngcontent-%COMP%]{gap:96px}.gap-98[_ngcontent-%COMP%]{gap:98px}.gap-100[_ngcontent-%COMP%]{gap:100px}.color-enemy-name[_ngcontent-%COMP%]{color:#e03636}.color-negative-value[_ngcontent-%COMP%]{color:#dd6363}.color-positive-value[_ngcontent-%COMP%]{color:#a6a6a6}.color-mana[_ngcontent-%COMP%]{color:#8282f6}.color-red-fire[_ngcontent-%COMP%]{color:#dc3e3e}.color-yellow-fire[_ngcontent-%COMP%]{color:#dfa94e}.color-nickname[_ngcontent-%COMP%]{color:#d7a061}.color-caption[_ngcontent-%COMP%]{color:#a37c83}.bar-hp[_ngcontent-%COMP%]{color:#9af481}.bar-mp[_ngcontent-%COMP%]{color:#8282f6}.bar-exp[_ngcontent-%COMP%]{color:#ffda82}.bar-enemy[_ngcontent-%COMP%]{color:#fb9696}.color-try[_ngcontent-%COMP%]{color:#d8ffd4}.color-free[_ngcontent-%COMP%]{color:#f9fff5}.app-paint-fight-page[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-fight-page/black-paint-for-fight-page-1.avif),url(/assets/images/ui/paint/for-fight-page/black-paint-for-fight-page-2.avif);background-repeat:no-repeat,no-repeat;background-position:left center,right center;background-size:50% 100%,50% 100%}.app-paint-item-tittles-base[_ngcontent-%COMP%], .app-paint-item-tittles-purple[_ngcontent-%COMP%], .app-paint-item-tittles-green[_ngcontent-%COMP%], .app-paint-item-tittles-gray[_ngcontent-%COMP%], .app-paint-item-tittles-gold[_ngcontent-%COMP%], .app-paint-item-tittles-blue[_ngcontent-%COMP%], .app-paint-item-tittles-aquamarine[_ngcontent-%COMP%]{background-size:956px 286px;width:956px;height:286px}.app-paint-item-tittles-base_incompressible[_ngcontent-%COMP%]{min-width:956px;min-height:286px}.app-paint-item-tittles-aquamarine[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/aquamarine.png)}.app-paint-item-tittles-blue[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/blue.png)}.app-paint-item-tittles-gold[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/gold.png)}.app-paint-item-tittles-gray[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/gray.png)}.app-paint-item-tittles-green[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/green.png)}.app-paint-item-tittles-purple[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-item-tittles/purple.png)}.app-paint-text[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-text/black-paint-for-text.avif);background-repeat:no-repeat;background-position:center center;background-size:100% 100%}.app-paint-text-2[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-text/black-paint-for-text-2.avif);background-repeat:no-repeat;background-position:center center;background-size:100% 100%}.app-paint-titles-1-long[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-tittles/black-paint-1-long.avif);background-size:468px 131px;background-repeat:no-repeat;width:468px;height:131px}.app-paint-titles-1-long_incompressible[_ngcontent-%COMP%]{min-width:468px;min-height:131px}.app-paint-titles-1-middle[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-tittles/black-paint-1-middle.avif);background-size:359px 131px;width:359px;height:131px}.app-paint-titles-1-middle_incompressible[_ngcontent-%COMP%]{min-width:359px;min-height:131px}.app-paint-titles-1-small[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-tittles/black-paint-1-small.avif);background-size:270px 131px;width:270px;height:131px}.app-paint-titles-1-small_incompressible[_ngcontent-%COMP%]{min-width:270px;min-height:131px}.app-paint-titles-2-medium[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-tittles/black-paint-2-medium.avif);background-size:692px 171px;width:692px;height:171px}.app-paint-titles-2-medium_incompressible[_ngcontent-%COMP%]{min-width:692px;min-height:171px}.app-paint-titles-2-large[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/paint/for-market/black.png);background-size:956px 223px;background-repeat:no-repeat;width:956px;height:223px}.app-paint-titles-2-large_incompressible[_ngcontent-%COMP%]{min-width:956px;min-height:223px}.app-btn[_ngcontent-%COMP%], .app-btn-huge[_ngcontent-%COMP%], .app-btn-standard[_ngcontent-%COMP%]{white-space:nowrap;-webkit-user-select:none;user-select:none;background-repeat:no-repeat}.btn-disabled-info[_ngcontent-%COMP%]{background-image:url(/assets/images/ui/icons/other/info-holder-question.png);background-repeat:no-repeat;background-size:61px;height:61px;width:61px;position:absolute;bottom:-26px;left:50%;transform:translate(-50%)}.app-btn-standard[_ngcontent-%COMP%]{height:94px;font-family:SellYouSoul,serif;color:#c4ad8e}.app-btn-standard.app-btn_active[_ngcontent-%COMP%], .app-btn-standard.app-btn_highlight[_ngcontent-%COMP%]{color:#dfa94e;text-shadow:0 0 16px #ff0000}.app-btn-standard[_ngcontent-%COMP%]   .btn-disabled-info[_ngcontent-%COMP%]{display:none}.app-btn-standard.disabled[_ngcontent-%COMP%], .app-btn-standard[_ngcontent-%COMP%]:disabled, .app-btn-standard[_ngcontent-%COMP%]:active.disabled{color:#796b5d}.app-btn-standard.disabled[_ngcontent-%COMP%]   .btn-disabled-info[_ngcontent-%COMP%], .app-btn-standard[_ngcontent-%COMP%]:disabled   .btn-disabled-info[_ngcontent-%COMP%], .app-btn-standard[_ngcontent-%COMP%]:active.disabled   .btn-disabled-info[_ngcontent-%COMP%]{display:flex;opacity:1}.app-btn-huge[_ngcontent-%COMP%]{height:150px;font-family:SellYouSoul,serif;color:#c4ad8e}.app-btn-huge.app-btn_active[_ngcontent-%COMP%], .app-btn-huge.app-btn_highlight[_ngcontent-%COMP%]{color:#dfa94e;text-shadow:0 0 24px #ff0000}.app-btn-huge.disabled[_ngcontent-%COMP%], .app-btn-huge[_ngcontent-%COMP%]:disabled, .app-btn-huge[_ngcontent-%COMP%]:active.disabled{color:#796b5d}.app-btn-biggest_font-size[_ngcontent-%COMP%]{font-size:76px}.app-btn-huge_font-size[_ngcontent-%COMP%], [_nghost-%COMP%], [_nghost-%COMP%]   .text.large[_ngcontent-%COMP%]{font-size:56px}.app-btn-medium-small_font-size[_ngcontent-%COMP%], .is-metamask[_nghost-%COMP%]   .text.large[_ngcontent-%COMP%], .is-metamask[_nghost-%COMP%]   .text.large[_ngcontent-%COMP%], .is-metamask   [_nghost-%COMP%]   .text.large[_ngcontent-%COMP%]{font-size:30px}.app-btn-small_font-size[_ngcontent-%COMP%], [_nghost-%COMP%]   .text.small[_ngcontent-%COMP%]{font-size:28px}.app-btn-tiny_font-size[_ngcontent-%COMP%]{font-size:24px}.app-btn-smallest_font-size[_ngcontent-%COMP%]{font-size:18px}.app-btn-micro_font-size[_ngcontent-%COMP%]{font-size:16px}.app-btn_font-size[_ngcontent-%COMP%], [_nghost-%COMP%]   .text[_ngcontent-%COMP%]{font-size:35px}.app-btn-medium_font-size[_ngcontent-%COMP%]{font-size:46px}  .is-metamask .app-btn-biggest_font-size{font-size:28px}  .is-metamask .app-btn-huge_font-size,   .is-metamask -shadowcsshost-no-combinator, [_nghost-%COMP%]     .is-metamask .text.large{font-size:22px}  .is-metamask .app-btn-medium-small_font-size, .is-metamask[_nghost-%COMP%]     .is-metamask .text.large, .is-metamask[_nghost-%COMP%]     .is-metamask .text.large, .is-metamask   [_nghost-%COMP%]     .is-metamask .text.large{font-size:11px}  .is-metamask .app-btn-small_font-size, [_nghost-%COMP%]     .is-metamask .text.small{font-size:12px}  .is-metamask .app-btn_font-size, [_nghost-%COMP%]     .is-metamask .text{font-size:14px}  .is-metamask .app-btn-medium_font-size{font-size:16px}  .is-metamask .app-btn-tiny_font-size{font-size:10px}  .is-metamask .app-btn-smallest_font-size{font-size:8px}  .is-metamask .app-btn-micro_font-size{font-size:7px}.is-metamask[_ngcontent-%COMP%]   .app-btn-biggest_font-size[_ngcontent-%COMP%]{font-size:28px}.is-metamask[_ngcontent-%COMP%]   .app-btn-huge_font-size[_ngcontent-%COMP%], .is-metamask   [_nghost-%COMP%], [_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text.large[_ngcontent-%COMP%]{font-size:22px}.is-metamask[_ngcontent-%COMP%]   .app-btn-medium-small_font-size[_ngcontent-%COMP%], .is-metamask[_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text.large[_ngcontent-%COMP%], .is-metamask[_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text.large[_ngcontent-%COMP%], .is-metamask   [_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text.large[_ngcontent-%COMP%]{font-size:11px}.is-metamask[_ngcontent-%COMP%]   .app-btn-small_font-size[_ngcontent-%COMP%], [_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text.small[_ngcontent-%COMP%]{font-size:12px}.is-metamask[_ngcontent-%COMP%]   .app-btn_font-size[_ngcontent-%COMP%], [_nghost-%COMP%]   .is-metamask[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:14px}.is-metamask[_ngcontent-%COMP%]   .app-btn-medium_font-size[_ngcontent-%COMP%]{font-size:16px}.is-metamask[_ngcontent-%COMP%]   .app-btn-tiny_font-size[_ngcontent-%COMP%]{font-size:10px}.is-metamask[_ngcontent-%COMP%]   .app-btn-micro_font-size[_ngcontent-%COMP%]{font-size:7px}.app-btns-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:first-child){margin-left:0}.app-btns-row[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.app-btns-col[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:first-child){margin-top:0}.app-btns-col[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:0}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:131px;font-family:SellYouSoul,serif;color:#c4ad8e;background-repeat:no-repeat;background-position:center center}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{align-self:center;margin-top:22px;white-space:nowrap}[_nghost-%COMP%]   .text.has-description[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .text--long[_ngcontent-%COMP%]{margin-left:-40px}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{display:block;width:166px;height:44px;margin:-22px auto 0}[_nghost-%COMP%]   .icon--no-margin[_ngcontent-%COMP%]{margin:-22px 0 0}[_nghost-%COMP%]   .desc[_ngcontent-%COMP%]{margin-top:-10px;font-family:Cambria,sans-serif;font-size:28px}"],changeDetection:0}),m})()}}]);