"use strict";(self.webpackChunktetu_game_ui=self.webpackChunktetu_game_ui||[]).push([[244],{21244:(N,d,o)=>{o.r(d),o.d(d,{AuthModule:()=>y});var p=o(35103),s=o(16268),C=o(28230),_=o(82865),g=o(76291),h=o(68305),u=o(35879),m=o(23907),t=o(98678),v=o(3474),M=o(11831),f=o(30611),O=o(11517),P=o(24590),b=o(59634),A=o(48821);function w(e,c){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",13),t._UZ(2,"img",14),t.TgZ(3,"button",15),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.oauth())}),t._uU(4," Email Login "),t.qZA()(),t.TgZ(5,"div",13),t._UZ(6,"img",16),t.TgZ(7,"button",15),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onSelectWallet())}),t._uU(8," Crypto Wallet "),t.qZA()(),t.BQk()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("disabled",!n.isWeb3authServiceInited),t.xp6(4),t.Q6J("disabled",!n.isWeb3authServiceInited)}}function T(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",13),t._UZ(1,"img",23),t.TgZ(2,"button",24),t.NdJ("click",function(){const r=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.onProviderClick(r))}),t._uU(3),t.qZA()()}if(2&e){const n=c.$implicit;t.xp6(1),t.Q6J("src","assets/images/ui/icons/wallet/"+n.name.toLowerCase()+".png",t.LSH)("alt",n.name.toLowerCase()),t.xp6(2),t.hij(" ",n.name," ")}}function S(e,c){if(1&e){const n=t.EpF();t.YNc(0,T,4,3,"div",17),t.TgZ(1,"button",18),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.isFirstStep=!0)}),t._uU(2," Back "),t.qZA(),t._UZ(3,"app-scratch",19),t.TgZ(4,"div",20),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onDisconnect())}),t._UZ(5,"div",21),t.TgZ(6,"div",22),t._uU(7,"Clear data"),t.qZA()()}if(2&e){const n=t.oxw();t.Q6J("ngForOf",n.providers)}}let x=(()=>{class e{constructor(n,a,i,r,l,k,U,E,I,F){this.destroy$=n,this.web3ModalService=a,this.web3authService=i,this.router=r,this.activatedRoute=l,this.logger=k,this.providerService=U,this.web3=E,this.changeDetectorRef=I,this.appStateService=F,this.isFirstStep=!0,this.providers=[],this.isWeb3authServiceInited=!1}ngOnInit(){this.providers=this.web3ModalService.web3WalletConnector.providers,this.activatedRoute.snapshot.url.length&&this.activatedRoute.snapshot.url[0].path===g.EX.WALLET&&(this.isFirstStep=!1),this.initWeb3Providers(),this.providerService.subscribeOnAccountAndNetwork(this.destroy$,this.changeDetectorRef,n=>{this.account=n,this.onAccAndNetInited()},n=>{this.chainId=n,this.onAccAndNetInited()})}onAccAndNetInited(){console.log("onAccAndNetInited",this.account,this.chainId),this.account&&this.chainId&&(console.log("onAccAndNetInited this.web3authService.getUserInfo()",this.web3authService.getUserInfo()),this.web3authService.getUserInfo()?this.router.navigate([g.EX.WEB3AUTH_SETTINGS]):this.router.navigate([g.EX.DELEGATE]))}oauth(){this.web3authService.getProvider()?this.web3ModalService.provider$.next(this.web3authService.getProvider()):this.web3authService.oauthLogin$().pipe((0,u.R)(this.destroy$)).subscribe(()=>{const n=this.web3authService.getProvider();if(!n)throw new Error("Provider is not set after OAuth login!");console.log("Connected to OAuth provider",n),this.web3ModalService.provider$.next(n)})}onProviderClick(n){n.onClick()}onSelectWallet(){this.isFirstStep=!1,this.router.navigate([g.EX.AUTH,g.EX.WALLET])}onDisconnect(){this.web3ModalService.disconnect()}initWeb3Providers(){this.web3authService.init(()=>{this.isWeb3authServiceInited=!0,this.changeDetectorRef.detectChanges(),this.web3ModalService.providers.pipe((0,u.R)(this.destroy$)).subscribe(n=>{this.logger.trace(">>> providers inited",n),this.providers=n})})}reset(){(0,m.s)()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.z),t.Y36(v.y),t.Y36(M.G),t.Y36(s.F0),t.Y36(s.gz),t.Y36(f.Kf),t.Y36(O.H),t.Y36(P.U),t.Y36(t.sBO),t.Y36(b.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],hostAttrs:[1,"g-flex-column","g-flex-column__item"],features:[t._Bn([h.z])],decls:18,vars:3,consts:[[1,"buttons","g-flex","g-flex--align-center","g-flex--space-between"],[1,"app-btn-token-banner-1","g-flex","g-flex--align-center","g-flex--space-between","pointer"],[1,"app-btn_font-size","text-shadow"],["src","assets/images/ui/icons/tokens/ftm.png","alt","ftm",1,"token-icon"],[1,"app-btn-token-banner-2","g-flex","g-flex--align-center","g-flex--space-between","pointer"],["src","assets/images/ui/icons/tokens/sacra.png","alt","sacra",1,"token-icon"],["src","assets/images/ui/art/empty-dungeon.avif","alt","empty",1,"img2"],[1,"title","app-btn-huge_font-size","title-a"],[1,"bg"],[1,"bg2"],[1,"content","g-flex-column","g-flex--align-center","g-flex--justify-center","gap-40"],[4,"ngIf","ngIfElse"],["connectTpl",""],[1,"item","g-flex","g-flex--align-center"],["src","assets/images/ui/icons/wallet/google.png","alt","google",1,"btn-logo"],[1,"btn","btn-choose","app-btn-silver-4","pointer",3,"disabled","click"],["src","assets/images/ui/icons/wallet/wallet.png","alt","google",1,"btn-logo"],["class","item g-flex g-flex--align-center",4,"ngFor","ngForOf"],[1,"app-btn-red-4","pointer",3,"click"],["backgroundType","huge",1,"scratch2"],[1,"btn","g-flex-column","g-flex--align-center","pointer",3,"click"],[1,"app-btn-trash"],[1,"btn__label","btn__label--small","app-btn-small_font-size"],[1,"btn-logo",3,"src","alt"],[1,"app-btn-silver-4","pointer",3,"click"]],template:function(n,a){if(1&n&&(t.TgZ(0,"div",0)(1,"button",1)(2,"div",2),t._uU(3,"Buy FTM"),t.qZA(),t._UZ(4,"img",3),t.qZA(),t.TgZ(5,"button",4),t._UZ(6,"img",5),t.TgZ(7,"div",2),t._uU(8,"Buy SACRA"),t.qZA()()(),t._UZ(9,"img",6),t.TgZ(10,"div",7),t._uU(11),t.qZA(),t._UZ(12,"div",8)(13,"div",9),t.TgZ(14,"div",10),t.YNc(15,w,9,2,"ng-container",11),t.YNc(16,S,8,1,"ng-template",null,12,t.W1O),t.qZA()),2&n){const i=t.MAs(17);t.xp6(11),t.hij(" ",a.isFirstStep?"Authorization":"Choose wallet","\n"),t.xp6(4),t.Q6J("ngIf",a.isFirstStep)("ngIfElse",i)}},dependencies:[p.sg,p.O5,A.T],styles:[".pointer[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:url(/assets/images/cursor/cursor-50-active.avif) 10 0,pointer}.no-action[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}.hidden[_ngcontent-%COMP%]{display:none!important}.width-100[_ngcontent-%COMP%]{width:100%}@keyframes button-process-animation{0%{text-shadow:none}to{text-shadow:0 0 16px #dfa94e}}.button-process-animation[_ngcontent-%COMP%]{animation-duration:1s;animation-name:button-process-animation;animation-iteration-count:infinite;animation-direction:alternate}.page-loader[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}.gap-2[_ngcontent-%COMP%]{gap:2px}.gap-4[_ngcontent-%COMP%]{gap:4px}.gap-6[_ngcontent-%COMP%]{gap:6px}.gap-8[_ngcontent-%COMP%]{gap:8px}.gap-10[_ngcontent-%COMP%]{gap:10px}.gap-12[_ngcontent-%COMP%]{gap:12px}.gap-14[_ngcontent-%COMP%]{gap:14px}.gap-16[_ngcontent-%COMP%]{gap:16px}.gap-18[_ngcontent-%COMP%]{gap:18px}.gap-20[_ngcontent-%COMP%]{gap:20px}.gap-22[_ngcontent-%COMP%]{gap:22px}.gap-24[_ngcontent-%COMP%]{gap:24px}.gap-26[_ngcontent-%COMP%]{gap:26px}.gap-28[_ngcontent-%COMP%]{gap:28px}.gap-30[_ngcontent-%COMP%]{gap:30px}.gap-32[_ngcontent-%COMP%]{gap:32px}.gap-34[_ngcontent-%COMP%]{gap:34px}.gap-36[_ngcontent-%COMP%]{gap:36px}.gap-38[_ngcontent-%COMP%]{gap:38px}.gap-40[_ngcontent-%COMP%]{gap:40px}.gap-42[_ngcontent-%COMP%]{gap:42px}.gap-44[_ngcontent-%COMP%]{gap:44px}.gap-46[_ngcontent-%COMP%]{gap:46px}.gap-48[_ngcontent-%COMP%]{gap:48px}.gap-50[_ngcontent-%COMP%]{gap:50px}.gap-52[_ngcontent-%COMP%]{gap:52px}.gap-54[_ngcontent-%COMP%]{gap:54px}.gap-56[_ngcontent-%COMP%]{gap:56px}.gap-58[_ngcontent-%COMP%]{gap:58px}.gap-60[_ngcontent-%COMP%]{gap:60px}.gap-62[_ngcontent-%COMP%]{gap:62px}.gap-64[_ngcontent-%COMP%]{gap:64px}.gap-66[_ngcontent-%COMP%]{gap:66px}.gap-68[_ngcontent-%COMP%]{gap:68px}.gap-70[_ngcontent-%COMP%]{gap:70px}.gap-72[_ngcontent-%COMP%]{gap:72px}.gap-74[_ngcontent-%COMP%]{gap:74px}.gap-76[_ngcontent-%COMP%]{gap:76px}.gap-78[_ngcontent-%COMP%]{gap:78px}.gap-80[_ngcontent-%COMP%]{gap:80px}.gap-82[_ngcontent-%COMP%]{gap:82px}.gap-84[_ngcontent-%COMP%]{gap:84px}.gap-86[_ngcontent-%COMP%]{gap:86px}.gap-88[_ngcontent-%COMP%]{gap:88px}.gap-90[_ngcontent-%COMP%]{gap:90px}.gap-92[_ngcontent-%COMP%]{gap:92px}.gap-94[_ngcontent-%COMP%]{gap:94px}.gap-96[_ngcontent-%COMP%]{gap:96px}.gap-98[_ngcontent-%COMP%]{gap:98px}.gap-100[_ngcontent-%COMP%]{gap:100px}.color-enemy-name[_ngcontent-%COMP%]{color:#e03636}.color-negative-value[_ngcontent-%COMP%]{color:#dd6363}.color-positive-value[_ngcontent-%COMP%]{color:#a6a6a6}.color-mana[_ngcontent-%COMP%]{color:#8282f6}.color-red-fire[_ngcontent-%COMP%]{color:#dc3e3e}.color-yellow-fire[_ngcontent-%COMP%]{color:#dfa94e}.color-nickname[_ngcontent-%COMP%]{color:#d7a061}.color-caption[_ngcontent-%COMP%]{color:#a37c83}.bar-hp[_ngcontent-%COMP%]{color:#9af481}.bar-mp[_ngcontent-%COMP%]{color:#8282f6}.bar-exp[_ngcontent-%COMP%]{color:#ffda82}.bar-enemy[_ngcontent-%COMP%]{color:#fb9696}.color-try[_ngcontent-%COMP%]{color:#d8ffd4}.color-free[_ngcontent-%COMP%]{color:#f9fff5}.buttons[_ngcontent-%COMP%]{position:absolute;width:100%;padding:0 60px}.bg[_ngcontent-%COMP%]{margin-top:-120px;width:1080px;height:1058px;background-image:url(/assets/images/ui/background-lists/auth/top.avif);background-repeat:no-repeat;z-index:1}.bg2[_ngcontent-%COMP%]{position:relative;margin-top:0;width:1080px;height:1060px;background-image:url(/assets/images/ui/background-lists/auth/middle.avif);background-repeat:repeat-y;z-index:3}.title[_ngcontent-%COMP%]{position:relative;margin-top:-100px;z-index:1;text-align:center}.container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;padding:20px 24px}.scratch[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]{position:absolute;width:100%;margin:60px 0;top:1080px;z-index:4}.item[_ngcontent-%COMP%]{margin-left:-124px}.btn-logo[_ngcontent-%COMP%]{margin-right:40px}.btn-choose[_ngcontent-%COMP%]{padding:0 40px;white-space:break-spaces;line-height:.8}"],changeDetection:0}),e})();const Z=[{path:g.EX.EMPTY,component:x},{path:g.EX.WALLET,component:x}];let y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,s.Bz.forChild(Z),_.m,C.r]}),e})()}}]);