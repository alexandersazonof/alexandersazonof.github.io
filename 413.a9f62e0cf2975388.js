"use strict";(self.webpackChunktetu_game_ui=self.webpackChunktetu_game_ui||[]).push([[413],{42413:(y,C,e)=>{e.r(C),e.d(C,{HeroesListModule:()=>X});var o=e(35103),u=e(5476),f=e(16268),M=e(82865),h=e(76291),d=e(68305),x=e(56561),P=e(18460),_=e(68351),a=e(79601),m=e(53012),s=e(70474);const p=`${m.C} ${s.q}`,v=(0,a.X$)("filterXFlyInOutAnimation",[(0,a.eR)(":increment",[(0,a.IO)(":enter",[(0,a.oB)({transform:"translateX(-100%)"}),(0,a.EY)(10,[(0,a.jt)(p,(0,a.oB)({transform:"translateX(0)"}))])],{optional:!0})]),(0,a.eR)(":decrement",[(0,a.IO)(":leave",[(0,a.EY)(10,[(0,a.jt)(p,(0,a.oB)({transform:"translateX(100%)"}))])],{optional:!0})])]);var T=e(3358),I=e(35879),t=e(98678),E=e(90473),A=e(11517),L=e(59634),F=e(51216),S=e(96342),b=e(2097),R=e(24723),D=e(51650),H=e(36361),Z=e(46835),N=e(29617);function Q(i,c){1&i&&t._UZ(0,"app-loading-small",2)}function Y(i,c){1&i&&t._UZ(0,"app-hero-info",11),2&i&&t.Q6J("hero",c.$implicit)("isListItem",!0)}function J(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",3)(1,"app-title",4)(2,"div",5)(3,"div"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",6),t._uU(7),t.qZA()()(),t.TgZ(8,"div",5),t._UZ(9,"app-search",7),t.TgZ(10,"app-dropdown",8),t.NdJ("selectItem",function(g){t.CHM(n);const O=t.oxw();return t.KtG(O.setItemSorting(g.id))}),t.qZA()()(),t.TgZ(11,"div",9),t.YNc(12,Y,1,2,"app-hero-info",10),t.qZA()}if(2&i){const n=t.oxw();t.xp6(1),t.Q6J("isNoMargin",!0),t.xp6(3),t.hij(" ",t.lcZ(5,9,"heroes-list.my-heroes")," "),t.xp6(3),t.hij(" ",n.heroModels.length," "),t.xp6(2),t.Q6J("control",n.searchControl),t.xp6(1),t.Q6J("size",n.DROPDOWN_SIZE.SMALL)("items",n.heroesSortOptions)("selectedItem",n.dropdownSortSelected),t.xp6(1),t.Q6J("@filterXFlyInOutAnimation",n.heroModels.length),t.xp6(1),t.Q6J("ngForOf",n.heroesFilteredAndSorted)}}const B=[{path:h.EX.EMPTY,component:(()=>{class i{constructor(n,r,g,O,j,z,$,w){this.destroy$=n,this.heroControllerService=r,this.changeDetectorRef=g,this.providerService=O,this.appStateService=j,this.subgraphService=z,this.translateService=$,this.mediator=w,this.heroModels=[],this.heroesFiltered=[],this.heroesFilteredAndSorted=[],this.heroesFilteredAndSortedTrigger=-1,this.heroLoading=!0,this.MAIN_ROUTES=h.EX,this.currentFilterQuery=null,this.heroesSortOptions=[{label:this.translateService.instant("heroes-list.options.all"),id:""},{label:this.translateService.instant("heroes-list.options.life"),id:"life"},{label:this.translateService.instant("heroes-list.options.mana"),id:"mana"},{label:this.translateService.instant("heroes-list.options.experience"),id:"experience"},{label:this.translateService.instant("heroes-list.options.life-chances"),id:"lifeChances"}],this.dropdownSortSelected=this.heroesSortOptions[0],this.searchControl=new u.NI(null),this.DROPDOWN_SIZE=P.wk,this.appStateService.setHeaderState({isInventoryShown:!0,backUrl:[h.EX.HERO,_.je,"0"]})}ngOnInit(){this.providerService.subscribeOnAccountAndNetwork(this.destroy$,this.changeDetectorRef,n=>{this.account=n,this.init()},n=>{this.chainId=n,this.heroControllerService.adjustFees(n),this.init()}),this.searchControl.valueChanges.pipe((0,T.b)(300),(0,I.R)(this.destroy$)).subscribe(n=>{this.currentFilterQuery=n,this.applyAllFilters()})}init(){this.account&&this.chainId&&this.loadHeroes()}loadHeroes(){this.subgraphService.user$(this.account).pipe((0,I.R)(this.destroy$)).subscribe(n=>{this.heroLoading=!1,n&&this.heroModels.push(...n.heroes.map(r=>r)),this.applyAllFilters(),this.changeDetectorRef.detectChanges(),this.mediator.dispatch(new x.N.PageLoaded(h.EX.INVENTORY))})}setItemSorting(n){this.currentHeroesSort=n,this.applyItemSorting()}applyAllFilters(){this.heroesFiltered=this.applyItemQueryFilter(this.heroModels,this.currentFilterQuery||""),this.applyItemSorting()}applyItemSorting(){const n=this.currentHeroesSort;this.heroesFilteredAndSorted=n?[...this.heroesFiltered].sort((r,g)=>g.stats[n]-r.stats[n]):[...this.heroesFiltered],this.heroesFilteredAndSortedTrigger+=1,this.changeDetectorRef.detectChanges()}applyItemQueryFilter(n,r=""){if(!r)return n;const g=r.toLowerCase();return n.filter(O=>O.uniqName.toLowerCase().indexOf(g)>=0)}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(d.z),t.Y36(E.r),t.Y36(t.sBO),t.Y36(A.H),t.Y36(L.Z),t.Y36(F.k),t.Y36(S.sK),t.Y36(b._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-heroes-list"]],hostAttrs:[1,"g-flex-column"],features:[t._Bn([d.z])],decls:3,vars:2,consts:[["class","page-loader",4,"ngIf","ngIfElse"],["contentTpl",""],[1,"page-loader"],[1,"title","g-flex","g-flex--align-center","g-flex--space-between"],["backgroundType","middle","fontType","large",3,"isNoMargin"],[1,"g-flex","g-flex--align-center"],[1,"count","color-yellow-fire","app-btn-medium_font-size"],[1,"btn-search",3,"control"],["iconOnly","app-btn-square-list app-btn-square-list--small",3,"size","items","selectedItem","selectItem"],[1,"list","g-scroll-y"],["class","item",3,"hero","isListItem",4,"ngFor","ngForOf"],[1,"item",3,"hero","isListItem"]],template:function(n,r){if(1&n&&(t.YNc(0,Q,1,0,"app-loading-small",0),t.YNc(1,J,13,11,"ng-template",null,1,t.W1O)),2&n){const g=t.MAs(2);t.Q6J("ngIf",r.heroLoading)("ngIfElse",g)}},dependencies:[o.sg,o.O5,R.q,D.r,H.g,Z.T,N.J,S.X$],styles:[".pointer[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;cursor:url(/assets/images/cursor/cursor-50-active.avif) 10 0,pointer}.no-action[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;pointer-events:none}.hidden[_ngcontent-%COMP%]{display:none!important}.width-100[_ngcontent-%COMP%]{width:100%}@keyframes button-process-animation{0%{text-shadow:none}to{text-shadow:0 0 16px #dfa94e}}.button-process-animation[_ngcontent-%COMP%]{animation-duration:1s;animation-name:button-process-animation;animation-iteration-count:infinite;animation-direction:alternate}.page-loader[_ngcontent-%COMP%]{position:absolute;width:100%;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5}.gap-2[_ngcontent-%COMP%]{gap:2px}.gap-4[_ngcontent-%COMP%]{gap:4px}.gap-6[_ngcontent-%COMP%]{gap:6px}.gap-8[_ngcontent-%COMP%]{gap:8px}.gap-10[_ngcontent-%COMP%]{gap:10px}.gap-12[_ngcontent-%COMP%]{gap:12px}.gap-14[_ngcontent-%COMP%]{gap:14px}.gap-16[_ngcontent-%COMP%]{gap:16px}.gap-18[_ngcontent-%COMP%]{gap:18px}.gap-20[_ngcontent-%COMP%]{gap:20px}.gap-22[_ngcontent-%COMP%]{gap:22px}.gap-24[_ngcontent-%COMP%]{gap:24px}.gap-26[_ngcontent-%COMP%]{gap:26px}.gap-28[_ngcontent-%COMP%]{gap:28px}.gap-30[_ngcontent-%COMP%]{gap:30px}.gap-32[_ngcontent-%COMP%]{gap:32px}.gap-34[_ngcontent-%COMP%]{gap:34px}.gap-36[_ngcontent-%COMP%]{gap:36px}.gap-38[_ngcontent-%COMP%]{gap:38px}.gap-40[_ngcontent-%COMP%]{gap:40px}.gap-42[_ngcontent-%COMP%]{gap:42px}.gap-44[_ngcontent-%COMP%]{gap:44px}.gap-46[_ngcontent-%COMP%]{gap:46px}.gap-48[_ngcontent-%COMP%]{gap:48px}.gap-50[_ngcontent-%COMP%]{gap:50px}.gap-52[_ngcontent-%COMP%]{gap:52px}.gap-54[_ngcontent-%COMP%]{gap:54px}.gap-56[_ngcontent-%COMP%]{gap:56px}.gap-58[_ngcontent-%COMP%]{gap:58px}.gap-60[_ngcontent-%COMP%]{gap:60px}.gap-62[_ngcontent-%COMP%]{gap:62px}.gap-64[_ngcontent-%COMP%]{gap:64px}.gap-66[_ngcontent-%COMP%]{gap:66px}.gap-68[_ngcontent-%COMP%]{gap:68px}.gap-70[_ngcontent-%COMP%]{gap:70px}.gap-72[_ngcontent-%COMP%]{gap:72px}.gap-74[_ngcontent-%COMP%]{gap:74px}.gap-76[_ngcontent-%COMP%]{gap:76px}.gap-78[_ngcontent-%COMP%]{gap:78px}.gap-80[_ngcontent-%COMP%]{gap:80px}.gap-82[_ngcontent-%COMP%]{gap:82px}.gap-84[_ngcontent-%COMP%]{gap:84px}.gap-86[_ngcontent-%COMP%]{gap:86px}.gap-88[_ngcontent-%COMP%]{gap:88px}.gap-90[_ngcontent-%COMP%]{gap:90px}.gap-92[_ngcontent-%COMP%]{gap:92px}.gap-94[_ngcontent-%COMP%]{gap:94px}.gap-96[_ngcontent-%COMP%]{gap:96px}.gap-98[_ngcontent-%COMP%]{gap:98px}.gap-100[_ngcontent-%COMP%]{gap:100px}.color-enemy-name[_ngcontent-%COMP%]{color:#e03636}.color-negative-value[_ngcontent-%COMP%]{color:#dd6363}.color-positive-value[_ngcontent-%COMP%]{color:#a6a6a6}.color-mana[_ngcontent-%COMP%]{color:#8282f6}.color-red-fire[_ngcontent-%COMP%]{color:#dc3e3e}.color-yellow-fire[_ngcontent-%COMP%]{color:#dfa94e}.color-nickname[_ngcontent-%COMP%]{color:#d7a061}.color-caption[_ngcontent-%COMP%]{color:#a37c83}.bar-hp[_ngcontent-%COMP%]{color:#9af481}.bar-mp[_ngcontent-%COMP%]{color:#8282f6}.bar-exp[_ngcontent-%COMP%]{color:#ffda82}.bar-enemy[_ngcontent-%COMP%]{color:#fb9696}.color-try[_ngcontent-%COMP%]{color:#d8ffd4}.color-free[_ngcontent-%COMP%]{color:#f9fff5}.shadow__button[_ngcontent-%COMP%]{filter:drop-shadow(12px 15px 10px rgba(0,0,0,.15)) drop-shadow(0 0 15px rgba(0,0,0,.2))}.shadow__icon[_ngcontent-%COMP%]{filter:drop-shadow(0px 3px 2px rgba(0,0,0,.4)) drop-shadow(0 0 15px rgba(0,0,0,.2))}[_nghost-%COMP%]{margin-top:40px}.title[_ngcontent-%COMP%]{padding:20px 46px}.count[_ngcontent-%COMP%]{margin-left:10px}.divider[_ngcontent-%COMP%]{margin:0 20px}.item[_ngcontent-%COMP%]{margin-bottom:50px}.search[_ngcontent-%COMP%]{padding:0 16px;background-color:transparent;border:none;margin-right:10px}.list[_ngcontent-%COMP%]{padding-top:12px}"],data:{animation:[v]},changeDetection:0}),i})(),data:{animation:"HeroesListComponent"}}];let X=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[o.ez,f.Bz.forChild(B),u.u5,M.m]}),i})()},36361:(y,C,e)=>{e.d(C,{g:()=>_});var o=e(98678),u=e(68305),f=e(35879),M=e(35103),h=e(96256),d=e(5476);const x=["searchInput"];function P(a,m){if(1&a&&o._UZ(0,"input",3,4),2&a){const s=o.oxw();o.Q6J("formControl",s.control)}}let _=(()=>{class a{constructor(s){this.destroy$=s,this.isInputToRight=!1,this.isOpenChange=new o.vpe,this.isContentOpen=!1}set isOpen(s){this.isContentOpen=s}ngAfterViewInit(){this.searchInput.changes.pipe((0,f.R)(this.destroy$)).subscribe(s=>this.focusTaskInput())}toggleInput(s){s.preventDefault(),s.stopPropagation(),this.toggleVisibility()}toggleVisibility(s=null){this.isOpen=null===s?!this.isContentOpen:s,this.isOpenChange.emit(this.isContentOpen)}focusTaskInput(){this.searchInput.length>0&&this.searchInput.first.nativeElement.focus()}}return a.\u0275fac=function(s){return new(s||a)(o.Y36(u.z))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-search"]],viewQuery:function(s,p){if(1&s&&o.Gf(x,5),2&s){let l;o.iGM(l=o.CRH())&&(p.searchInput=l)}},hostAttrs:[1,"g-flex","g-flex--align-center","g-flex--justify-end"],inputs:{isInputToRight:"isInputToRight",isOpen:"isOpen",control:"control"},outputs:{isOpenChange:"isOpenChange"},features:[o._Bn([u.z])],decls:3,vars:5,consts:[[1,"g-flex","g-flex--align-center","g-flex--justify-end",3,"clickOutside"],["class","input app-input app-input--huge g-flex__item app-btn_font-size","autofocus","",3,"formControl",4,"ngIf"],[1,"search-btn","app-btn-square-search","app-btn-square-search--small",3,"click"],["autofocus","",1,"input","app-input","app-input--huge","g-flex__item","app-btn_font-size",3,"formControl"],["searchInput",""]],template:function(s,p){1&s&&(o.TgZ(0,"div",0),o.NdJ("clickOutside",function(){return p.toggleVisibility(!1)}),o.YNc(1,P,2,1,"input",1),o.TgZ(2,"button",2),o.NdJ("click",function(v){return p.toggleInput(v)}),o.qZA()()),2&s&&(o.ekj("g-flex--reverse",p.isInputToRight),o.xp6(1),o.Q6J("ngIf",p.isContentOpen),o.xp6(1),o.ekj("pressed",p.isContentOpen))},dependencies:[M.O5,h._,d.Fj,d.JJ,d.oH],styles:[".search-btn[_ngcontent-%COMP%]{align-self:center}.input[_ngcontent-%COMP%]{margin-right:-80px;padding-right:80px;background-color:transparent;border:none}"],changeDetection:0}),a})()}}]);